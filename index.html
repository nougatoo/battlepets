 <html>
 
	<style>
		table {
			font-family: arial, sans-serif;
			border-collapse: collapse;
			width: 50%;
			font-size: 12;
			table-layout: fixed;
			
		}

		td, th {
			border: 1px solid #dddddd;
			text-align: left;
			padding: 8px;
			width: 16.6%
		}
	</style>

	<title>HTML with PHP</title>

	<body>
	<!-- tr:nth-child(even) {
		background-color: #dddddd;
	} -->
 <center>
 <h1>Buy on Cenarion Circle</h1>
	<table border = '2'>
		<tr>
			<th>Name</th>
			<th>Realm</th>
			<th>Global Market Value</th>
			<th>Min Buy</th>
			<th>% Global Market Value</th>
			<th>Realm to Sell On</th>
	</tr>
	<?php
		require_once('util.php');
		require_once('findDeals.php');
		
		// Find good deals on wyrmrest
		$goodDealsRaw = findDealsForRealm("cenarion-circle", FALSE);
		$goodDealsRawSpecies = findDealsForRealm("cenarion-circle", TRUE);

		// Find good places to sell 
		$goodSellers1 = findSellersForRealm("wyrmrest-accord");
		$goodSellers2 = findSellersForRealm("proudmoore");
		$goodSellers3 = findSellersForRealm("emerald-dream");

		// Now that good sells contains only good selling pets that i do not own, we find good selling pets which are also good deals
		$goodDealsFiltered1 = array_intersect($goodDealsRawSpecies,$goodSellers1);

		foreach($goodDealsRaw as $row) {
		
				if(in_array($row['species_id'], $goodDealsFiltered1))
				{
					if($row['market_value_hist'] > 100000000)
						echo '<tr style=background-color:#ccffcc;>';
					else
						echo "<tr>";
					echo "<td>" . $row['name'] ."</td>";
					echo "<td>" . $row['buy_realm_name'] . "</td>";
					echo "<td>" . convertToWoWCurrency($row['market_value_hist']) . "</td>";
					echo "<td>" . convertToWoWCurrency($row['minbuy']) . "</td>";
					echo "<td>" . $row['percent_of_market']. "%</td>";
					echo "<td>" . "Wyrmrest Accord". "</td>";
					echo "</tr>";	
				}			
		}
		echo "</table><br/>";
		echo "	<table border = '2'>
			<tr>
				<th>Name</th>
				<th>Realm</th>
				<th>Global Market Value</th>
				<th>Min Buy</th>
				<th>% Global Market Value</th>
				<th>Realm to Sell On</th>
			</tr>";
		// Now that good sells contains only good selling pets that i do not own, we find good selling pets which are also good deals
		$goodDealsFiltered2 = array_intersect($goodDealsRawSpecies,$goodSellers2);

		foreach($goodDealsRaw as $row) {
		
				if(in_array($row['species_id'], $goodDealsFiltered2))
				{
					if($row['market_value_hist'] > 100000000)
						echo '<tr style=background-color:#ccffcc;>';
					else
						echo "<tr>";
					echo "<td>" . $row['name'] ."</td>";
					echo "<td>" . $row['buy_realm_name'] . "</td>";
					echo "<td>" . convertToWoWCurrency($row['market_value_hist']) . "</td>";
					echo "<td>" . convertToWoWCurrency($row['minbuy']) . "</td>";
					echo "<td>" . $row['percent_of_market']. "%</td>";
					echo "<td>" . "Proudmoore". "</td>";
					echo "</tr>";	
				}			
		}
		
		echo "</table>";
		echo "	<table border = '2'>
			<tr>
				<th>Name</th>
				<th>Realm</th>
				<th>Global Market Value</th>
				<th>Min Buy</th>
				<th>% Global Market Value</th>
				<th>Realm to Sell On</th>
			</tr><br/>";
		// Now that good sells contains only good selling pets that i do not own, we find good selling pets which are also good deals
		$goodDealsFiltered3 = array_intersect($goodDealsRawSpecies,$goodSellers3);

		foreach($goodDealsRaw as $row) {
		
				if(in_array($row['species_id'], $goodDealsFiltered3))
				{
					if($row['market_value_hist'] > 100000000)
						echo '<tr style=background-color:#ccffcc;>';
					else
						echo "<tr>";
					echo "<td>" . $row['name'] ."</td>";
					echo "<td>" . $row['buy_realm_name'] . "</td>";
					echo "<td>" . convertToWoWCurrency($row['market_value_hist']) . "</td>";
					echo "<td>" . convertToWoWCurrency($row['minbuy']) . "</td>";
					echo "<td>" . $row['percent_of_market']. "%</td>";
					echo "<td>" . "Emerald Dream". "</td>";
					echo "</tr>";	
				}			
		}

	?>
	</table>
	<h1>Buy on Wyrmrest Accord</h1>
	<table border = '2'>
		<tr>
			<th>Name</th>
			<th>Realm</th>
			<th>Global Market Value</th>
			<th>Min Buy</th>
			<th>% Global Market Value</th>
			<th>Realm to Sell On</th>
	</tr>
	<?php
		require_once('util.php');
		require_once('findDeals.php');
		
		// Find good deals on wyrmrest
		$goodDealsRaw = findDealsForRealm("wyrmrest-accord", FALSE);
		$goodDealsRawSpecies = findDealsForRealm("wyrmrest-accord", TRUE);

		// Find good places to sell 
		$goodSellers1 = findSellersForRealm("cenarion-circle");
		$goodSellers2 = findSellersForRealm("proudmoore");
		$goodSellers3 = findSellersForRealm("emerald-dream");

		// Now that good sells contains only good selling pets that i do not own, we find good selling pets which are also good deals
		$goodDealsFiltered1 = array_intersect($goodDealsRawSpecies,$goodSellers1);

		foreach($goodDealsRaw as $row) {
		
				if(in_array($row['species_id'], $goodDealsFiltered1))
				{
					if($row['market_value_hist'] > 100000000)
						echo '<tr style=background-color:#ccffcc;>';
					else
						echo "<tr>";
					echo "<td>" . $row['name'] ."</td>";
					echo "<td>" . $row['buy_realm_name'] . "</td>";
					echo "<td>" . convertToWoWCurrency($row['market_value_hist']) . "</td>";
					echo "<td>" . convertToWoWCurrency($row['minbuy']) . "</td>";
					echo "<td>" . $row['percent_of_market']. "%</td>";
					echo "<td>" . "Cenarion Circle". "</td>";
					echo "</tr>";	
				}			
		}
		echo "</table><br/>";
		echo "	<table border = '2'>
			<tr>
				<th>Name</th>
				<th>Realm</th>
				<th>Global Market Value</th>
				<th>Min Buy</th>
				<th>% Global Market Value</th>
				<th>Realm to Sell On</th>
			</tr>";
		// Now that good sells contains only good selling pets that i do not own, we find good selling pets which are also good deals
		$goodDealsFiltered2 = array_intersect($goodDealsRawSpecies,$goodSellers2);

		foreach($goodDealsRaw as $row) {
		
				if(in_array($row['species_id'], $goodDealsFiltered2))
				{
					if($row['market_value_hist'] > 100000000)
						echo '<tr style=background-color:#ccffcc;>';
					else
						echo "<tr>";
					echo "<td>" . $row['name'] ."</td>";
					echo "<td>" . $row['buy_realm_name'] . "</td>";
					echo "<td>" . convertToWoWCurrency($row['market_value_hist']) . "</td>";
					echo "<td>" . convertToWoWCurrency($row['minbuy']) . "</td>";
					echo "<td>" . $row['percent_of_market']. "%</td>";
					echo "<td>" . "Proudmoore". "</td>";
					echo "</tr>";	
				}			
		}
		
		echo "</table>";
		echo "	<table border = '2'>
			<tr>
				<th>Name</th>
				<th>Realm</th>
				<th>Global Market Value</th>
				<th>Min Buy</th>
				<th>% Global Market Value</th>
				<th>Realm to Sell On</th>
			</tr><br/>";
		// Now that good sells contains only good selling pets that i do not own, we find good selling pets which are also good deals
		$goodDealsFiltered3 = array_intersect($goodDealsRawSpecies,$goodSellers3);

		foreach($goodDealsRaw as $row) {
		
				if(in_array($row['species_id'], $goodDealsFiltered3))
				{
					if($row['market_value_hist'] > 100000000)
						echo '<tr style=background-color:#ccffcc;>';
					else
						echo "<tr>";
					echo "<td>" . $row['name'] ."</td>";
					echo "<td>" . $row['buy_realm_name'] . "</td>";
					echo "<td>" . convertToWoWCurrency($row['market_value_hist']) . "</td>";
					echo "<td>" . convertToWoWCurrency($row['minbuy']) . "</td>";
					echo "<td>" . $row['percent_of_market']. "%</td>";
					echo "<td>" . "Emerald Dream". "</td>";
					echo "</tr>";	
				}			
		}

	?>
	</table>
</center>
 
 </body>
 </html>